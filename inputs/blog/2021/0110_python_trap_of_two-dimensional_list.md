^^
self.ctx.title = "Pythonの`*`で作った二次元リストではまってしまったことについて。"
self.ctx.description = "Pythonの`*`で作った二次元リストで、二次元目のリストを更新すると、全てのリストに変更が加えられてしまい、はまったことについて書いた記事です。"
self.ctx.created_at = 1610236800
self.ctx.last_updated_at = 1625529600
^^

ここでは、`*`で同じリストを作り、それを中身とするPythonの二次元リストを作った際にはまったことについてまとめてあります。  
なお、元々この記事は、Qiitaにて公開をしていて、ここに移動しました。

## はまったこと
ここにmxの数だけ`-`を入れたリストをmy作るものがあります。

```python
mx,my = 3,3
l = [list('-'*mx)]*my

print(l)
# [['-','-','-'],['-','-','-'],['-','-','-']]
```
結果は期待通りです。  
ですが二番目のリストの一番目を`+`にしたいとします。  
すると、あれれ？

```python
l[1][0] = '+'

print(l)
# [['-','+','-'],['-','+','-'],['-','+','-']]
```
二番目のリストだけ変更を施したいのに、全てのリストが変更されました。

## なぜ
id関数で識別IDを全て調べてみると

```python
print(id(l[0]))
# 40116936
print(id(l[1]))
# 40116936
print(id(l[2]))
# 40116936
```
全部同じです。  
どこに入れても他のとIDが一緒なので同じのが入ってしまいます。  
どうやら、`*`は、リストのインスタンスの参照を増やすだけのようです。  
すなわち、コピーする必要があります。

## 対処法
`for`文で一個づつ新しくリストを作っていけばできました。  

```python
mx,my = 3,3
l = [['-' for x in range(mx)] for y in range(mx)]
```
二番目のリストの一番目に`+`を入れてみると

```python
l[1][0] = '+'

print(l)
# [['-','-','-'],['-','-','-'],['-','+','-']]
```
期待通りの結果になった。
